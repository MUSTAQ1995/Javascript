<!DOCTYPE html>
<html>
<head>
	<title>Caching of WeakMap</title>
</head>
<body>
<script type="text/javascript">
	'use strict';
	let cache = new WeakMap();

	//calculate and remember the result.
	function process(obj) {
		if (!cache.has(obj)){
			let result = /* calculate the result for */ obj;
			cache.set(obj, result);
		}
		return cache.get(obj);
	}

let obj = {/* some object*/};

let result1 = process(obj);
let result2 = process(obj);

//...later,when the object is not needed any more:
obj = null;

//can't get cache.size,as it's a WeakMap,
//but it's 0 or soon be 0
//when obj gets garbage collected,cached date will be removed as well
</script>
</body>
</html>